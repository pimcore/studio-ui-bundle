/*! For license information please see src-core-modules-widget-manager-widget-manager-container-stories.1656699a.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpimcore_studio_ui=self.webpackChunkpimcore_studio_ui||[]).push([[8866],{"./js/src/core/modules/widget-manager/widget-manager-container.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,_default:()=>_default,default:()=>widget_manager_container_stories});var react=__webpack_require__("./node_modules/react/index.js"),lib=__webpack_require__("./node_modules/flexlayout-react/lib/index.js"),functions=__webpack_require__("./node_modules/antd-style/es/functions/index.js");function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter((function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable})))),ownKeys.forEach((function(key){_define_property(target,key,source[key])}))}return target}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})),target}function _templateObject(){var data=function _tagged_template_literal(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n        position: absolute;\n        inset: 8px 6px 12px 6px;\n  \n        .flexlayout__layout {\n          overflow: visible;\n        }\n  \n        &.widget-manager--inner {\n          inset: 0;\n        }\n  \n        .flexlayout__tab_button_leading,\n        .flexlayout__border_button_leading {\n          display: none;\n        }\n  \n        .flexlayout__tab_button {\n          margin: 0;\n          padding: ",";\n          background: ",";\n          transition: all "," ",";\n          font-size: ","px;\n          color: ",";\n          outline: none;\n          gap: ","px;\n        \n          &:hover {\n            background: ",";\n          }\n  \n          &_trailing {\n            display: none;\n          }\n  \n          &--selected {\n            font-weight: ",";\n            color: ",";\n            background: ",";\n            border-top: 2px solid ",";\n\n            .widget-manager__tab-title-close-button {\n              display: block;\n            }\n  \n            .widget-manager-tab-title {\n              margin-top: -2px;\n            }\n  \n            &:hover {\n              background: ",";\n            }\n          }\n\n          .flexlayout__tab_button_trailing {\n            margin-top: -2px;\n            display: none;\n          }\n  \n          &:focus:not(:focus-visible), &:active {\n            color: ",";\n          }\n  \n          &:first-child {\n            border-left: 1px solid ","66;\n          }\n        }\n  \n        .flexlayout__tabset_tab_divider {\n          width: ","px;\n        }\n  \n        .flexlayout__tab_button_top {\n          border-radius: ","px ","px 0 0;\n          border-bottom: 0;\n        }\n  \n        .flexlayout__border_inner_tab_container {\n          width: calc(100svh - 12px);\n          justify-content: flex-end;\n        }\n  \n        .flexlayout__border_inner_tab_container_left, .flexlayout__border_inner_tab_container_right {\n          .flexlayout__border_tab_divider {\n            width: 0;\n          }\n        }\n  \n        .flexlayout__splitter,\n        .flexlayout__border,\n        .flexlayout__tabset_tabbar_outer {\n          background: transparent;\n        }\n  \n        .flexlayout__tab {\n          overflow: visible;\n          background: ",";\n          box-shadow: 0px 8px 24px 0px rgba(0, 0, 0, 0.07), 2px 2px 0px 0px rgba(79, 78, 183, 0.05);\n          border-right: 1px solid ","66;\n          border-bottom: 1px solid ","66;\n          border-left: 1px solid ","66;\n          border-radius: 0 8px 8px 8px;\n        }\n\n        .flexlayout__tab:not(.widget-manager-inner-container) {\n          overflow: hidden;\n        }\n      \n        .flexlayout__tab_border {\n          box-shadow: 0px 8px 24px 0px rgba(0, 0, 0, 0.07), 2px 2px 0px 0px rgba(79, 78, 183, 0.05);\n          border-top: 1px solid ","66;\n          border-right: 1px solid ","66;\n          border-bottom: 1px solid ","66;\n          border-left: 1px solid ","66;\n          border-radius: 8px;\n        }\n  \n        .widget-manager-inner-container {\n          background: transparent;\n          box-shadow: none;\n          border: 0;\n        }\n  \n        .flexlayout__tabset {\n          overflow: visible;\n          border-radius: ","px;\n          font-family: ",";\n  \n          &, &-selected {\n            background: transparent;\n          }\n        }\n  \n        .flexlayout__border {\n          font-family: ",";\n        }\n  \n        .flexlayout__border_button {\n          margin: 0 0 6px 0;\n          background: transparent;\n          width: 40px;\n          justify-content: center;\n          border-radius: ","px;\n          transition: all "," ",";\n  \n          &--selected {\n            color: ",";\n            border-top: 1.5px solid ",";\n            background: ",";\n          }\n        }\n  \n        @media (hover: hover) {\n          .flexlayout__border_button--unselected:hover {\n            color: ","; \n            background: ",";\n          }\n          \n          .flexlayout__tab_button--selected:hover {\n            color: ",";\n            background: ",";\n          }\n        }\n  \n        .flexlayout__border_button_trailing {\n          display: none;\n        }\n  \n        .flexlayout__border_left {\n          border-right: 0;\n  \n          .flexlayout__border_button_content {\n            transform: rotate(90deg);\n          }\n        }\n  \n        .flexlayout__border_right {\n          border-left: 0;\n  \n          .flexlayout__border_button_content {\n            transform: rotate(-90deg);\n          }\n        }\n  \n        .flexlayout__tabset_tabbar_outer_top {\n          border: 0;\n        }\n  \n        .flexlayout__tabset_tabbar_inner_tab_container {\n          padding-left: 0;\n        }\n  \n        .flexlayout__border_toolbar {\n          display: none;\n        }\n\n        .widget-manager__tab-title-close-button {\n          display: none;\n          width: 12px;\n          height: 12px;\n          padding: 4px;\n          line-height: 0;\n          margin-top: -8px;\n          color: ",";\n        }\n      "]);return _templateObject=function _templateObject(){return data},data}var getTabTokens=function(token){var _token_Tabs,_token_cardPadding,tabTokens=_object_spread({zIndexPopup:token.zIndexPopupBase+50,cardBg:token.colorFillAlter,cardHeight:token.controlHeightLG,cardPadding:"",cardPaddingSM:"".concat(1.5*token.paddingXXS,"px ").concat(token.padding,"px"),cardPaddingLG:"".concat(token.paddingXS,"px ").concat(token.padding,"px ").concat(1.5*token.paddingXXS,"px"),titleFontSize:"".concat(token.fontSize,"px"),titleFontSizeLG:"".concat(token.fontSizeLG,"px"),titleFontSizeSM:"".concat(token.fontSize,"px"),inkBarColor:token.colorPrimary,horizontalMargin:"0 0 ".concat(token.margin,"px 0"),horizontalItemGutter:32,horizontalItemMargin:"",horizontalItemMarginRTL:"",horizontalItemPadding:"".concat(token.paddingSM,"px 0"),horizontalItemPaddingSM:"".concat(token.paddingXS,"px 0"),horizontalItemPaddingLG:"".concat(token.padding,"px 0"),verticalItemPadding:"".concat(token.paddingXS,"px ").concat(token.paddingLG,"px"),verticalItemMargin:"".concat(token.margin,"px 0 0 0"),itemSelectedColor:token.colorPrimary,itemHoverColor:token.colorPrimaryHover,itemActiveColor:token.colorPrimaryActive,cardGutter:token.marginXXS/2},null!==(_token_Tabs=null==token?void 0:token.Tabs)&&void 0!==_token_Tabs?_token_Tabs:{});return tabTokens=_object_spread_props(_object_spread({},tabTokens),{tabsCardPadding:null!==(_token_cardPadding=token.cardPadding)&&void 0!==_token_cardPadding?_token_cardPadding:"".concat((tabTokens.cardHeight-Math.round(token.fontSize*token.lineHeight))/2-token.lineWidth,"px ").concat(token.paddingSM,"px"),dropdownEdgeChildVerticalPadding:token.paddingXXS,tabsActiveTextShadow:"0 0 0.25px currentcolor",tabsDropdownHeight:200,tabsDropdownWidth:120,tabsHorizontalItemMargin:"0 0 0 ".concat(token.horizontalItemGutter,"px"),tabsHorizontalItemMarginRTL:"0 0 0 ".concat(token.horizontalItemGutter,"px")})},useStlyes=(0,functions.kc)((function(param){var token=param.token,css=param.css,tabToken=getTabTokens(token);return{widgetManager:css(_templateObject(),tabToken.tabsCardPadding,token.colorFillAlter,token.motionDurationSlow,token.motionEaseInOut,token.fontSize,tabToken.itemColor,token.marginXS,token.Tabs.colorBgHoverUnselectedTab,token.fontWeightStrong,tabToken.itemActiveColor,token.colorBgContainer,token.Tabs.colorBorderActiveTab,token.colorBgContainer,tabToken.itemActiveColor,token.Tabs.colorBorderContainer,tabToken.cardGutter,token.borderRadius,token.borderRadius,token.colorBgContainer,token.Tabs.colorBorderContainer,token.Tabs.colorBorderContainer,token.Tabs.colorBorderContainer,token.Tabs.colorBorderContainer,token.Tabs.colorBorderContainer,token.Tabs.colorBorderContainer,token.Tabs.colorBorderContainer,token.borderRadius,token.fontFamily,token.fontFamily,token.borderRadiusSM,token.motionDurationSlow,token.motionEaseInOut,tabToken.itemActiveColor,token.colorBorderActive,token.controlItemBgHover,token.colorTextSecondary,token.controlItemBgActiveHover,tabToken.itemActiveColor,token.colorBgContainer,token.colorIcon)}}),{hashPriority:"low"});function _object_without_properties(source,excluded){if(null==source)return{};var key,i,target=function _object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var WidgetManagerView=function(_param){var className=_param.className,props=_object_without_properties(_param,["className"]),styles=useStlyes().styles;return react.createElement("div",{className:["widget-manager",className,styles.widgetManager].join(" ")},react.createElement(lib.Layout,props))};WidgetManagerView.__docgenInfo={description:"",methods:[],displayName:"WidgetManagerView",props:{className:{required:!1,tsType:{name:"string"},description:""}},composes:["ILayoutProps"]};var widget_container=__webpack_require__("./js/src/core/modules/widget-manager/widget/widget-container.tsx"),store=__webpack_require__("./js/src/core/app/store/index.ts"),widget_manager_slice=__webpack_require__("./js/src/core/modules/widget-manager/widget-manager-slice.ts"),theme=__webpack_require__("./node_modules/antd/es/theme/index.js"),depency_injection=__webpack_require__("./js/src/core/app/depency-injection/index.ts"),tab_title_container=__webpack_require__("./js/src/core/modules/widget-manager/title/tab-title-container.tsx"),services=__webpack_require__("./js/src/core/app/config/services/index.ts"),TabTitleOuterContainer=function(param){var node=param.node,componentName=node.getComponent(),config=(0,depency_injection.$1)(services.j.widgetManager).getWidget(componentName),Component=react.createElement(tab_title_container.X,{modified:!1,node});return void 0!==(null==config?void 0:config.titleComponent)&&(Component=react.createElement(config.titleComponent,{node})),react.createElement(react.Fragment,null," ",Component," ")};TabTitleOuterContainer.__docgenInfo={description:"",methods:[],displayName:"TabTitleOuterContainer",props:{node:{required:!0,tsType:{name:"TabTitleContainerProps['node']",raw:"TabTitleContainerProps['node']"},description:""}}};var useToken=theme.Z.useToken,WidgetManagerInnerContainer=function(){var modelJson=(0,store.CG)(widget_manager_slice.FP),dispatch=(0,store.TL)(),model=lib.Model.fromJson(modelJson),token=useToken().token;return(0,react.useEffect)((function(){var tabToken=getTabTokens(token);model.doAction(lib.Actions.updateModelAttributes({tabSetTabStripHeight:tabToken.cardHeight,tabSetTabHeaderHeight:tabToken.cardHeight,borderBarSize:50}))}),[]),(0,react.useEffect)((function(){var _model_getActiveTabset,selectedNode=null===(_model_getActiveTabset=model.getActiveTabset())||void 0===_model_getActiveTabset?void 0:_model_getActiveTabset.getSelectedNode();dispatch(void 0!==selectedNode?(0,widget_manager_slice.CM)({nodeId:selectedNode.getId()}):(0,widget_manager_slice.CM)(null))}),[model]),react.createElement(WidgetManagerView,{className:"widget-manager--inner",factory:widgetManagerFactory,model,onModelChange:function onModelChange(model){dispatch((0,widget_manager_slice.az)(model.toJson()))},onRenderTab:function onRenderTab(node,renderValues){renderValues.content=react.createElement(TabTitleOuterContainer,{node}),renderValues.leading=react.createElement(react.Fragment,null)}})},MemoizedWidgetManagerInnerContainer=(0,react.memo)(WidgetManagerInnerContainer);WidgetManagerInnerContainer.__docgenInfo={description:"",methods:[],displayName:"WidgetManagerInnerContainer"};var widgetManagerFactory=function(node){if("inner-widget-manager"===node.getComponent())return react.createElement(MemoizedWidgetManagerInnerContainer,null);var widgetRegistryService=depency_injection.nC.get(services.j.widgetManager),widgetName=node.getComponent();if(void 0!==widgetName){var widget=widgetRegistryService.getWidget(widgetName);if(void 0===widget)throw new Error("Widget ".concat(widgetName," not found"));var component=widget.component;return react.createElement(widget_container.H,{component,node})}};widgetManagerFactory.__docgenInfo={description:"",methods:[],displayName:"widgetManagerFactory"};var widget_manager_container_useToken=theme.Z.useToken,WidgetManagerContainer=function(){var modelJson=(0,store.CG)(widget_manager_slice.w9),dispatch=(0,store.TL)(),model=lib.Model.fromJson(modelJson),bottomTabset=model.getNodeById("bottom_tabset"),token=widget_manager_container_useToken().token;return(0,react.useEffect)((function(){var tabToken=getTabTokens(token);model.doAction(lib.Actions.updateModelAttributes({tabSetTabStripHeight:tabToken.cardHeight,tabSetTabHeaderHeight:tabToken.cardHeight,borderBarSize:50}))}),[]),0===bottomTabset.getChildren().length?model.doAction(lib.Actions.updateNodeAttributes(bottomTabset.getId(),{height:-8})):-8===bottomTabset.getHeight()&&model.doAction(lib.Actions.updateNodeAttributes(bottomTabset.getId(),{height:40})),react.createElement(WidgetManagerView,{factory:widgetManagerFactory,model,onModelChange:function onModelChange(model){dispatch((0,widget_manager_slice.jy)(model.toJson()))},onRenderTab:function onRenderTab(node,renderValues){renderValues.content=react.createElement(tab_title_container.X,{node}),renderValues.leading=react.createElement(react.Fragment,null)}})};WidgetManagerContainer.__docgenInfo={description:"",methods:[],displayName:"WidgetManagerContainer"};const widget_manager_container_stories={title:"Modules/Widget Manager",component:WidgetManagerContainer,parameters:{layout:"fullscreen",docs:{story:{parameters:{height:"555px"}}}},tags:["autodocs"]};var _default={parameters:{docs:{story:{inline:!1,height:"600px"}}}};_default.parameters={..._default.parameters,docs:{..._default.parameters?.docs,source:{originalSource:"{\n  parameters: {\n    docs: {\n      story: {\n        inline: false,\n        height: '600px'\n      }\n    }\n  }\n}",..._default.parameters?.docs?.source}}};const __namedExportsOrder=["_default"]}}]);